<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libE57Format: e57::CompressedVectorReaderImpl Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libE57Format
   </div>
   <div id="projectbrief">C++ library to read &amp; write the E57 file format for point cloud data</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classe57_1_1_compressed_vector_reader_impl.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classe57_1_1_compressed_vector_reader_impl-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">e57::CompressedVectorReaderImpl Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_e57_format_impl_8h_source.html">E57FormatImpl.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for e57::CompressedVectorReaderImpl:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classe57_1_1_compressed_vector_reader_impl__coll__graph.svg" width="443" height="444"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1e732d88459c5e5ca406e57a94cfa125"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#a1e732d88459c5e5ca406e57a94cfa125">CompressedVectorReaderImpl</a> (std::shared_ptr&lt; <a class="el" href="classe57_1_1_compressed_vector_node_impl.html">CompressedVectorNodeImpl</a> &gt; ni, std::vector&lt; <a class="el" href="classe57_1_1_source_dest_buffer.html">SourceDestBuffer</a> &gt; &amp;dbufs)</td></tr>
<tr class="separator:a1e732d88459c5e5ca406e57a94cfa125"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2c6879921425fe9862bd304bd4e4c0a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#aa2c6879921425fe9862bd304bd4e4c0a">~CompressedVectorReaderImpl</a> ()</td></tr>
<tr class="separator:aa2c6879921425fe9862bd304bd4e4c0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16086bc21a6757d47365e1493eff2845"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#a16086bc21a6757d47365e1493eff2845">read</a> ()</td></tr>
<tr class="separator:a16086bc21a6757d47365e1493eff2845"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d3299c87e6bf7367c93646d01364c4a"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#a8d3299c87e6bf7367c93646d01364c4a">read</a> (std::vector&lt; <a class="el" href="classe57_1_1_source_dest_buffer.html">SourceDestBuffer</a> &gt; &amp;dbufs)</td></tr>
<tr class="separator:a8d3299c87e6bf7367c93646d01364c4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ba2bd9906ff64a44981e96a49642951"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#a7ba2bd9906ff64a44981e96a49642951">seek</a> (uint64_t recordNumber)</td></tr>
<tr class="separator:a7ba2bd9906ff64a44981e96a49642951"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a250bac822b1a9574bdc1d96f1cdadeb5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#a250bac822b1a9574bdc1d96f1cdadeb5">isOpen</a> () const</td></tr>
<tr class="separator:a250bac822b1a9574bdc1d96f1cdadeb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad17715e9cb96237f129c5c089ec09dee"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classe57_1_1_compressed_vector_node_impl.html">CompressedVectorNodeImpl</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#ad17715e9cb96237f129c5c089ec09dee">compressedVectorNode</a> () const</td></tr>
<tr class="separator:ad17715e9cb96237f129c5c089ec09dee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57623488dd325d2ff22161ee8979ef0e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#a57623488dd325d2ff22161ee8979ef0e">close</a> ()</td></tr>
<tr class="separator:a57623488dd325d2ff22161ee8979ef0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e3fa17f2c094ac8505239c4ab9d238e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#a1e3fa17f2c094ac8505239c4ab9d238e">dump</a> (int indent=0, std::ostream &amp;os=std::cout)</td></tr>
<tr class="separator:a1e3fa17f2c094ac8505239c4ab9d238e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ad45c7a7a2472343d3eab4c66718c9648"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#ad45c7a7a2472343d3eab4c66718c9648">checkImageFileOpen</a> (const char *srcFileName, int srcLineNumber, const char *srcFunctionName) const</td></tr>
<tr class="separator:ad45c7a7a2472343d3eab4c66718c9648"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8efc4875455ba37ece373915ab74b18"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#ae8efc4875455ba37ece373915ab74b18">checkReaderOpen</a> (const char *srcFileName, int srcLineNumber, const char *srcFunctionName) const</td></tr>
<tr class="separator:ae8efc4875455ba37ece373915ab74b18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91d78338e2289fed58c0b482ec00b037"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#a91d78338e2289fed58c0b482ec00b037">setBuffers</a> (std::vector&lt; <a class="el" href="classe57_1_1_source_dest_buffer.html">SourceDestBuffer</a> &gt; &amp;dbufs)</td></tr>
<tr class="separator:a91d78338e2289fed58c0b482ec00b037"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2793ac93e2e638fe059a960d9f816423"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#a2793ac93e2e638fe059a960d9f816423">earliestPacketNeededForInput</a> () const</td></tr>
<tr class="separator:a2793ac93e2e638fe059a960d9f816423"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aca91af0321f1f14401b63513325d31"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classe57_1_1_data_packet.html">DataPacket</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#a8aca91af0321f1f14401b63513325d31">dataPacket</a> (uint64_t inLogicalOffset) const</td></tr>
<tr class="separator:a8aca91af0321f1f14401b63513325d31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c49b736e62453d5bdb0862153d9a9fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#a4c49b736e62453d5bdb0862153d9a9fb">feedPacketToDecoders</a> (uint64_t currentPacketLogicalOffset)</td></tr>
<tr class="separator:a4c49b736e62453d5bdb0862153d9a9fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ccba5a1b0d26d0fbb7d02cb36d880ec"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#a8ccba5a1b0d26d0fbb7d02cb36d880ec">findNextDataPacket</a> (uint64_t nextPacketLogicalOffset)</td></tr>
<tr class="separator:a8ccba5a1b0d26d0fbb7d02cb36d880ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a1d586f107c6ab74e1ce3472de7330930"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#a1d586f107c6ab74e1ce3472de7330930">isOpen_</a></td></tr>
<tr class="separator:a1d586f107c6ab74e1ce3472de7330930"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fc9fe7115812bf2bc4489d3d6ef741d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classe57_1_1_source_dest_buffer.html">SourceDestBuffer</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#a9fc9fe7115812bf2bc4489d3d6ef741d">dbufs_</a></td></tr>
<tr class="separator:a9fc9fe7115812bf2bc4489d3d6ef741d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8ee44f682975f91f9ae447ab2388239"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classe57_1_1_compressed_vector_node_impl.html">CompressedVectorNodeImpl</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#ac8ee44f682975f91f9ae447ab2388239">cVector_</a></td></tr>
<tr class="separator:ac8ee44f682975f91f9ae447ab2388239"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26f313dcf5eb3c59e9f0b4b6b7bfe7d9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacee57.html#a3d9f3ef04a34eebe073ceb91a1b47251">NodeImplSharedPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#a26f313dcf5eb3c59e9f0b4b6b7bfe7d9">proto_</a></td></tr>
<tr class="separator:a26f313dcf5eb3c59e9f0b4b6b7bfe7d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64c33b9e3c730ad38835df9bf3e4add9"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structe57_1_1_decode_channel.html">DecodeChannel</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#a64c33b9e3c730ad38835df9bf3e4add9">channels_</a></td></tr>
<tr class="separator:a64c33b9e3c730ad38835df9bf3e4add9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e753800aec336c24e35058d5c55bb33"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classe57_1_1_packet_read_cache.html">PacketReadCache</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#a2e753800aec336c24e35058d5c55bb33">cache_</a></td></tr>
<tr class="separator:a2e753800aec336c24e35058d5c55bb33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc46286c662d906830c82105333f67e6"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#adc46286c662d906830c82105333f67e6">recordCount_</a></td></tr>
<tr class="separator:adc46286c662d906830c82105333f67e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c1451ef55342f7cb78f58b3215ed36f"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#a9c1451ef55342f7cb78f58b3215ed36f">maxRecordCount_</a></td></tr>
<tr class="memdesc:a9c1451ef55342f7cb78f58b3215ed36f"><td class="mdescLeft">&#160;</td><td class="mdescRight">number of records written so far  <a href="classe57_1_1_compressed_vector_reader_impl.html#a9c1451ef55342f7cb78f58b3215ed36f">More...</a><br /></td></tr>
<tr class="separator:a9c1451ef55342f7cb78f58b3215ed36f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b14105cd0a8c1861bc37b530ae7ad41"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#a5b14105cd0a8c1861bc37b530ae7ad41">sectionEndLogicalOffset_</a></td></tr>
<tr class="separator:a5b14105cd0a8c1861bc37b530ae7ad41"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1e732d88459c5e5ca406e57a94cfa125"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e732d88459c5e5ca406e57a94cfa125">&#9670;&nbsp;</a></span>CompressedVectorReaderImpl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CompressedVectorReaderImpl::CompressedVectorReaderImpl </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classe57_1_1_compressed_vector_node_impl.html">CompressedVectorNodeImpl</a> &gt;&#160;</td>
          <td class="paramname"><em>cvi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classe57_1_1_source_dest_buffer.html">SourceDestBuffer</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>dbufs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<h1><a class="anchor" id="autotoc_md0"></a>
================================================================</h1>
<p>================================================================ </p>
<p>Allow reading of a completed CompressedVector, whether file is being read or currently being written. ??? what other situations need checking for? ??? check if CV not yet written to? ??? file in error state?</p>
<p>Empty dbufs is an error</p>
<p>Get CompressedArray's prototype node (all array elements must match this type)</p>
<p>Check dbufs well formed (matches proto exactly)</p>
<p>For each dbuf, create an appropriate <a class="el" href="classe57_1_1_decoder.html">Decoder</a> based on the cVector_ attributes</p>
<p>Calc which stream the given path belongs to. This depends on position of the node in the proto tree.</p>
<p>Get how many records are actually defined</p>
<p>Read CompressedVector section header</p>
<p>Pre-calc end of section, so can tell when we are out of packets.</p>
<p>Convert physical offset to first data packet to logical</p>
<p>Verify that packet given by dataPhysicalOffset is actually a data packet, init channels</p>
<p>Double check that have a data packet</p>
<p>Have good packet, initialize channels</p>
<p>Just before return (and can't throw) increment reader count ??? safer way to assure don't miss close?</p>
<p>If get here, the reader is open</p>

</div>
</div>
<a id="aa2c6879921425fe9862bd304bd4e4c0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2c6879921425fe9862bd304bd4e4c0a">&#9670;&nbsp;</a></span>~CompressedVectorReaderImpl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CompressedVectorReaderImpl::~CompressedVectorReaderImpl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>??? what if already closed?</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad45c7a7a2472343d3eab4c66718c9648"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad45c7a7a2472343d3eab4c66718c9648">&#9670;&nbsp;</a></span>checkImageFileOpen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CompressedVectorReaderImpl::checkImageFileOpen </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>srcFileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>srcLineNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>srcFunctionName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ae8efc4875455ba37ece373915ab74b18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8efc4875455ba37ece373915ab74b18">&#9670;&nbsp;</a></span>checkReaderOpen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CompressedVectorReaderImpl::checkReaderOpen </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>srcFileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>srcLineNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>srcFunctionName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a57623488dd325d2ff22161ee8979ef0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57623488dd325d2ff22161ee8979ef0e">&#9670;&nbsp;</a></span>close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CompressedVectorReaderImpl::close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Before anything that can throw, decrement reader count</p>
<p>No error if reader not open</p>
<p>Destroy decoders</p>

</div>
</div>
<a id="ad17715e9cb96237f129c5c089ec09dee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad17715e9cb96237f129c5c089ec09dee">&#9670;&nbsp;</a></span>compressedVectorNode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classe57_1_1_compressed_vector_node_impl.html">CompressedVectorNodeImpl</a> &gt; CompressedVectorReaderImpl::compressedVectorNode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8aca91af0321f1f14401b63513325d31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aca91af0321f1f14401b63513325d31">&#9670;&nbsp;</a></span>dataPacket()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classe57_1_1_data_packet.html">DataPacket</a> * CompressedVectorReaderImpl::dataPacket </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>inLogicalOffset</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1e3fa17f2c094ac8505239c4ab9d238e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e3fa17f2c094ac8505239c4ab9d238e">&#9670;&nbsp;</a></span>dump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CompressedVectorReaderImpl::dump </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>indent</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>os</em> = <code>std::cout</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2793ac93e2e638fe059a960d9f816423"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2793ac93e2e638fe059a960d9f816423">&#9670;&nbsp;</a></span>earliestPacketNeededForInput()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t CompressedVectorReaderImpl::earliestPacketNeededForInput </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Test if channel needs more input. Important to call inputProcess just before this, so these tests work.</p>
<p>Check if earliest so far</p>

</div>
</div>
<a id="a4c49b736e62453d5bdb0862153d9a9fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c49b736e62453d5bdb0862153d9a9fb">&#9670;&nbsp;</a></span>feedPacketToDecoders()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CompressedVectorReaderImpl::feedPacketToDecoders </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>currentPacketLogicalOffset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Read earliest packet into cache and send data to decoders with unblocked output</p>
<p>Get packet at currentPacketLogicalOffset into memory.</p>
<p>Double check that have a data packet. Should have already determined this.</p>
<p>Feed bytestreams to channels with unblocked output that are reading from this packet</p>
<p>Skip channels that have already read this packet.</p>
<p>Get bytestream buffer for this channel from packet</p>
<p>Calc where we are in the buffer</p>
<p>Double check we are not off end of buffer</p>
<p>Feed into decoder</p>
<p>Adjust counts of bytestream location</p>
<p>Check if this channel has exhausted its bytestream buffer in this packet</p>
<p>Skip over any index or empty packets to next data packet.</p>
<p>If some channel has exhausted this packet, find next data packet and update currentPacketLogicalOffset for all interested channels.</p>
<p>Get packet at nextPacketLogicalOffset into memory.</p>
<p>Got a data packet, update the channels with exhausted input</p>
<p>It is OK if the next packet doesn't contain any data for this channel, will skip packet on next iter of loop</p>
<p>??? perform flush if new packet flag set?</p>
<p>Reached end without finding data packet, mark exhausted channels as finished</p>

</div>
</div>
<a id="a8ccba5a1b0d26d0fbb7d02cb36d880ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ccba5a1b0d26d0fbb7d02cb36d880ec">&#9670;&nbsp;</a></span>findNextDataPacket()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t CompressedVectorReaderImpl::findNextDataPacket </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>nextPacketLogicalOffset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Starting at nextPacketLogicalOffset, search for next data packet until hit end of binary section.</p>
<p>Guess it's a data packet, if not continue to next packet</p>
<p>All packets have length in same place, so can use the field to skip to next packet.</p>
<p>Ran off end of section, so return failure code.</p>

</div>
</div>
<a id="a250bac822b1a9574bdc1d96f1cdadeb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a250bac822b1a9574bdc1d96f1cdadeb5">&#9670;&nbsp;</a></span>isOpen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CompressedVectorReaderImpl::isOpen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>don't checkImageFileOpen(<b>FILE</b>, <b>LINE</b>, <b>FUNCTION</b>), or <a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#ae8efc4875455ba37ece373915ab74b18">checkReaderOpen()</a></p>

</div>
</div>
<a id="a16086bc21a6757d47365e1493eff2845"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16086bc21a6757d47365e1493eff2845">&#9670;&nbsp;</a></span>read() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned CompressedVectorReaderImpl::read </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Rewind all dbufs so start writing to them at beginning</p>
<p>Allow decoders to use data they already have in their queue to fill newly empty dbufs This helps to keep decoder input queues smaller, which reduces backtracking in the packet cache.</p>
<p>Loop until every dbuf is full or we have reached end of the binary section.</p>
<p>Find the earliest packet position for channels that are still hungry It's important to call inputProcess of the decoders before this call, so current hungriness level is reflected.</p>
<p>If nobody's hungry, we are done with the read</p>
<p>Feed packet to the hungry decoders</p>
<p>Verify that each channel produced the same number of records</p>
<p>Return number of records transferred to each dbuf.</p>

</div>
</div>
<a id="a8d3299c87e6bf7367c93646d01364c4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d3299c87e6bf7367c93646d01364c4a">&#9670;&nbsp;</a></span>read() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned CompressedVectorReaderImpl::read </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classe57_1_1_source_dest_buffer.html">SourceDestBuffer</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>dbufs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>don't checkImageFileOpen(<b>FILE</b>, <b>LINE</b>, <b>FUNCTION</b>), <a class="el" href="classe57_1_1_compressed_vector_reader_impl.html#a16086bc21a6757d47365e1493eff2845">read()</a> will do it</p>
<p>Check compatible with current dbufs</p>

</div>
</div>
<a id="a7ba2bd9906ff64a44981e96a49642951"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ba2bd9906ff64a44981e96a49642951">&#9670;&nbsp;</a></span>seek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CompressedVectorReaderImpl::seek </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>recordNumber</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>!!! implement</p>

</div>
</div>
<a id="a91d78338e2289fed58c0b482ec00b037"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91d78338e2289fed58c0b482ec00b037">&#9670;&nbsp;</a></span>setBuffers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CompressedVectorReaderImpl::setBuffers </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classe57_1_1_source_dest_buffer.html">SourceDestBuffer</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>dbufs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>don't checkImageFileOpen don't checkReaderOpen</p>
<p>Check dbufs well formed: no dups, no extra, missing is ok</p>
<p>If had previous dbufs_, check to see if new ones have changed in incompatible way</p>
<p>Throw exception if old and new not compatible</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a2e753800aec336c24e35058d5c55bb33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e753800aec336c24e35058d5c55bb33">&#9670;&nbsp;</a></span>cache_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classe57_1_1_packet_read_cache.html">PacketReadCache</a>* e57::CompressedVectorReaderImpl::cache_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a64c33b9e3c730ad38835df9bf3e4add9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64c33b9e3c730ad38835df9bf3e4add9">&#9670;&nbsp;</a></span>channels_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structe57_1_1_decode_channel.html">DecodeChannel</a>&gt; e57::CompressedVectorReaderImpl::channels_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac8ee44f682975f91f9ae447ab2388239"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8ee44f682975f91f9ae447ab2388239">&#9670;&nbsp;</a></span>cVector_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classe57_1_1_compressed_vector_node_impl.html">CompressedVectorNodeImpl</a>&gt; e57::CompressedVectorReaderImpl::cVector_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9fc9fe7115812bf2bc4489d3d6ef741d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fc9fe7115812bf2bc4489d3d6ef741d">&#9670;&nbsp;</a></span>dbufs_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classe57_1_1_source_dest_buffer.html">SourceDestBuffer</a>&gt; e57::CompressedVectorReaderImpl::dbufs_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1d586f107c6ab74e1ce3472de7330930"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d586f107c6ab74e1ce3472de7330930">&#9670;&nbsp;</a></span>isOpen_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool e57::CompressedVectorReaderImpl::isOpen_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9c1451ef55342f7cb78f58b3215ed36f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c1451ef55342f7cb78f58b3215ed36f">&#9670;&nbsp;</a></span>maxRecordCount_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t e57::CompressedVectorReaderImpl::maxRecordCount_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>number of records written so far </p>

</div>
</div>
<a id="a26f313dcf5eb3c59e9f0b4b6b7bfe7d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26f313dcf5eb3c59e9f0b4b6b7bfe7d9">&#9670;&nbsp;</a></span>proto_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacee57.html#a3d9f3ef04a34eebe073ceb91a1b47251">NodeImplSharedPtr</a> e57::CompressedVectorReaderImpl::proto_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="adc46286c662d906830c82105333f67e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc46286c662d906830c82105333f67e6">&#9670;&nbsp;</a></span>recordCount_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t e57::CompressedVectorReaderImpl::recordCount_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a5b14105cd0a8c1861bc37b530ae7ad41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b14105cd0a8c1861bc37b530ae7ad41">&#9670;&nbsp;</a></span>sectionEndLogicalOffset_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t e57::CompressedVectorReaderImpl::sectionEndLogicalOffset_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_e57_format_impl_8h_source.html">E57FormatImpl.h</a></li>
<li><a class="el" href="_e57_format_impl_8cpp.html">E57FormatImpl.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacee57.html">e57</a></li><li class="navelem"><a class="el" href="classe57_1_1_compressed_vector_reader_impl.html">CompressedVectorReaderImpl</a></li>
    <li class="footer">Generated on Sun Jun 28 2020 21:08:03 for libE57Format by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
